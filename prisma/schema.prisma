generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id       String @id @default(uuid())
  nama     String
  username String @unique
  password String
  role     Role   @default(KASIR)

  @@map("users")
}

model MenuItem {
  id        Int      @id @default(autoincrement())
  nama      String
  harga     Decimal  @db.Decimal(10, 2)
  kategori  String?
  deskripsi String?
  aktif     Boolean  @default(true)
  updatedAt DateTime @updatedAt

  @@map("menu")
}

model Feedback {
  id        Int      @id @default(autoincrement())
  nama      String?
  email     String?
  pesan     String
  rating    Int?
  sumber    String?
  createdAt DateTime @default(now())
  laporanId Int?     @unique
  laporan   Laporan? @relation("LaporanFeedback", fields: [laporanId], references: [id])

  @@map("feedback")
}

model Laporan {
  judul          String   @default("Transaksi")
  id             Int      @id @default(autoincrement())
  tanggal        DateTime @default(now())
  rangkuman      String?
  periodeMulai   DateTime?
  periodeSelesai DateTime?
  dibuatOleh     String?
  feedback       Feedback? @relation("LaporanFeedback")
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt

  @@map("laporan")
}

model Karyawan {
  id        Int      @id @default(autoincrement())
  nama      String
  jabatan   String
  kontak    String?
  gaji      Decimal? @db.Decimal(12, 2)
  aktif     Boolean  @default(true)
  updatedAt DateTime @updatedAt

  @@map("karyawan")
}

model Sisa {
  id       Int    @id @default(autoincrement())
  nama     String
  jumlah   Float
  satuan   String
  kategori String

  @@map("sisa")
}

enum Role {
  OWNER
  KASIR
  HEAD_KITCHEN
}
